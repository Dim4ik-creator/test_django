{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobMatch — Профиль кандидата</title>
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
</head>
<body>
    <header class="header">
        <a href="{% url 'candidate_home' %}" class="logo">
            <img src="{% static 'png/logo.png' %}" alt="Logo" class="logo-img">
            <span class="logo-text">JobMatch</span>
        </a>

        <nav class="nav">
            <a href="{% url 'candidate_home' %}" class="nav-link">Главная</a>
            <a href="{% url 'profile_candidate' %}" class="nav-link active">Профиль</a>
            <a href="{% url "job_list" %}" class="nav-link">Вакансии</a>
        </nav>

        <button class="logout-btn" onclick="window.location.href='{% url 'logout' %}'">Выйти</button>
    </header>
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %}
    <main class="profile-container">
        <div class="profile-card">
            <h1>Профиль кандидата</h1>

            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %}

            <form id="editForm" method="POST">
                {% csrf_token %}
                <div class="profile-info">
                    <label for="name">Имя</label>
                    <input type="text" id="name" name="name" value="{{ candidate.name }}" readonly>

                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ candidate.email }}" readonly>
                    <label for="bio">Описание</label>
                    <textarea id="bio" name="bio" readonly>{{ candidate.bio }}</textarea>
                </div>

                <div class="buttons">
                    <button type="button" id="editBtn" class="btn-edit">Редактировать профиль</button>
                    <button type="submit" id="saveBtn" class="btn-save" style="display:none;">Сохранить</button>
                </div>
            </form>
        </div>
    </main>
    <script>
        const editBtn = document.getElementById("editBtn");
        const saveBtn = document.getElementById("saveBtn");
        const inputs = document.querySelectorAll("#editForm input, #editForm textarea");

        editBtn.addEventListener("click", () => {
            inputs.forEach(input => input.removeAttribute("readonly"));
            editBtn.style.display = "none";
            saveBtn.style.display = "inline-block";
        });

        document.addEventListener('DOMContentLoaded', function() {
            const messages = document.querySelectorAll('.messages li');
            messages.forEach((msg, index) => {
                // через 3 секунды начинаем анимацию
                setTimeout(() => {
                    msg.style.opacity = '0';
                    msg.style.transform = 'translateY(-20px)'; // поднимаем вверх
                    // через 0.8 секунды удаляем элемент
                    setTimeout(() => msg.remove(), 800);
                }, 3000 + index * 200); // добавляем небольшую задержку для красивого эффекта по очереди
            });
        });
    </script>
    
</body>
</html>